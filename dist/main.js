(()=>{"use strict";var t={};function e(t){let e=0,r=!1;return{length:t,get hits(){return e},get isSunk(){return r},hit:function(){e++,e===t&&(r=!0)}}}function r(){const t=Array.from(Array(10),(()=>Array(10).fill(null))),e=[];return{board:t,placeShip:function(r,n,o,i){if(n<0||n>=10||o<0||o>=10)throw new Error("Invalid coordinates");if(i){if(o+r.length>10)throw new Error("Ship placement out of bounds");for(let e=0;e<r.length;e++)if(null!==t[o+e][n])throw new Error("Ship placement overlap");for(let e=0;e<r.length;e++)t[o+e][n]={ship:r,isHit:!1}}else{if(n+r.length>10)throw new Error("Ship placement out of bounds");for(let e=0;e<r.length;e++)if(null!==t[o][n+e])throw new Error("Ship placement overlap");for(let e=0;e<r.length;e++)t[o][n+e]={ship:r,isHit:!1}}e.push(r)},receiveAttack:function(e,r){if(e<0||e>=10||r<0||r>=10)throw new Error("Invalid coordinates");const n=t[r][e];return null===n?(t[r][e]={isHit:!0},!0):(n.isHit=!0,n.ship.hit(),!0)},areAllShipsSunk:function(){return e.every((t=>t.isSunk))}}}t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),console.log("mazda".split("").reverse().join(""));const n=r(),o=r();n.placeShip(e(5),0,0,!0),n.placeShip(e(4),1,0,!0),n.placeShip(e(3),2,0,!0),n.placeShip(e(3),3,0,!0),n.placeShip(e(2),4,0,!0),o.placeShip(e(5),5,0,!0),o.placeShip(e(4),6,0,!0),o.placeShip(e(3),7,0,!0),o.placeShip(e(3),8,0,!0),o.placeShip(e(2),9,0,!0);const i={attack(t,e,r){t.receiveAttack(e,r)}},l={attack(t){let e=!1;for(;!e;){const r=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());t.board[n]&&t.board[n][r]&&!t.board[n][r].isHit&&(console.log(t.board[n][r]),t.receiveAttack(r,n),e=!0)}}};let a=i;function c(){a=a===i?l:i}const s=document.getElementById("player-board"),p=document.getElementById("computer-board");function h(t,e){e.innerHTML="";for(let r=0;r<t.board.length;r++)for(let n=0;n<t.board[r].length;n++){const l=document.createElement("div");l.classList.add("square"),null!==t.board[r][n]&&(t.board[r][n].isHit?t.board[r][n].ship?(l.classList.add("hit"),l.textContent="hit"):(l.classList.add("miss"),l.textContent="miss"):(l.classList.add("ship"),l.textContent="ship")),l.addEventListener("click",(()=>{a===i&&(a.attack(o,n,r),h(o,p),c(),d())})),e.appendChild(l)}}function d(){n.areAllShipsSunk()?alert("Computer wins!"):o.areAllShipsSunk()?alert("Player wins!"):a===l&&(console.log(n.board),a.attack(n),h(n,s),c(),d())}h(n,s),h(o,p),d()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aEIsT0FBUTRELElBQUssQ0FDOUMsTUFBTXhDLEVBQVNrQyxTQUFTTyxjQUFjLE9BQ3RDekMsRUFBTzBDLFVBQVVDLElBQUksVUFDSyxPQUF0QnpELEVBQU1BLE1BQU1VLEdBQUc0QyxLQUNidEQsRUFBTUEsTUFBTVUsR0FBRzRDLEdBQUczQyxNQUNoQlgsRUFBTUEsTUFBTVUsR0FBRzRDLEdBQUc3RCxNQUNwQnFCLEVBQU8wQyxVQUFVQyxJQUFJLE9BQ3JCM0MsRUFBTzRDLFlBQWMsUUFFckI1QyxFQUFPMEMsVUFBVUMsSUFBSSxRQUNyQjNDLEVBQU80QyxZQUFjLFNBR3ZCNUMsRUFBTzBDLFVBQVVDLElBQUksUUFDckIzQyxFQUFPNEMsWUFBYyxTQUl6QjVDLEVBQU82QyxpQkFBaUIsU0FBUyxLQUMzQmQsSUFBa0JQLElBQ3BCTyxFQUFjTixPQUFPRixFQUFlaUIsRUFBRzVDLEdBQ3ZDeUMsRUFBWWQsRUFBZWEsR0FDM0JKLElBQ0FjLElBQ0YsSUFFRlIsRUFBUVMsWUFBWS9DLEVBQ3RCLENBRUosQ0FFQSxTQUFTOEMsSUFDSHhCLEVBQVlyQixrQkFDZCtDLE1BQU0sa0JBSUp6QixFQUFjdEIsa0JBQ2hCK0MsTUFBTSxnQkFJSmpCLElBQWtCTCxJQUNwQlQsUUFBUUMsSUFBSUksRUFBWXBDLE9BQ3hCNkMsRUFBY04sT0FBT0gsR0FDckJlLEVBQVlmLEVBQWFXLEdBQ3pCRCxJQUNBYyxJQUVKLENBRUFULEVBQVlmLEVBQWFXLEdBQ3pCSSxFQUFZZCxFQUFlYSxHQUMzQlUsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsImZ1bmN0aW9uIHJldmVyc2VTdHJpbmcoc3RyKSB7XG4gIHJldHVybiBzdHIuc3BsaXQoXCJcIikucmV2ZXJzZSgpLmpvaW4oXCJcIik7XG59XG5cbmNvbnNvbGUubG9nKHJldmVyc2VTdHJpbmcoXCJtYXpkYVwiKSk7XG5cbi8vU0hJUCBGQUNUT1JZXG5cbmZ1bmN0aW9uIHNoaXAobGVuZ3RoKSB7XG4gIGxldCBfaGl0cyA9IDA7XG4gIGxldCBpc1N1bmsgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBoaXQoKSB7XG4gICAgX2hpdHMrKztcbiAgICBpZiAoX2hpdHMgPT09IGxlbmd0aCkge1xuICAgICAgaXNTdW5rID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGxlbmd0aCxcbiAgICBnZXQgaGl0cygpIHtcbiAgICAgIHJldHVybiBfaGl0cztcbiAgICB9LFxuICAgIGdldCBpc1N1bmsoKSB7XG4gICAgICByZXR1cm4gaXNTdW5rO1xuICAgIH0sXG4gICAgaGl0LFxuICB9O1xufVxuXG4vL0dBTUVCT0FSRCBGQUNUT1JZXG5cbmZ1bmN0aW9uIGdhbWVib2FyZCgpIHtcbiAgY29uc3QgYm9hcmQgPSBBcnJheS5mcm9tKEFycmF5KDEwKSwgKCkgPT4gQXJyYXkoMTApLmZpbGwobnVsbCkpO1xuICBjb25zdCBzaGlwcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIHBsYWNlU2hpcChzaGlwLCB4LCB5LCBpc1ZlcnRpY2FsKSB7XG4gICAgaWYgKHggPCAwIHx8IHggPj0gMTAgfHwgeSA8IDAgfHwgeSA+PSAxMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb29yZGluYXRlc1wiKTtcbiAgICB9XG5cbiAgICBpZiAoaXNWZXJ0aWNhbCkge1xuICAgICAgaWYgKHkgKyBzaGlwLmxlbmd0aCA+IDEwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNoaXAgcGxhY2VtZW50IG91dCBvZiBib3VuZHNcIik7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYm9hcmRbeSArIGldW3hdICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2hpcCBwbGFjZW1lbnQgb3ZlcmxhcFwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYm9hcmRbeSArIGldW3hdID0geyBzaGlwOiBzaGlwLCBpc0hpdDogZmFsc2UgfTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHggKyBzaGlwLmxlbmd0aCA+IDEwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNoaXAgcGxhY2VtZW50IG91dCBvZiBib3VuZHNcIik7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYm9hcmRbeV1beCArIGldICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2hpcCBwbGFjZW1lbnQgb3ZlcmxhcFwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYm9hcmRbeV1beCArIGldID0geyBzaGlwOiBzaGlwLCBpc0hpdDogZmFsc2UgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGlwcy5wdXNoKHNoaXApO1xuICB9XG4gIC8qXG4gIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2soeCwgeSkge1xuICAgIGlmICh4IDwgMCB8fCB4ID49IDEwIHx8IHkgPCAwIHx8IHkgPj0gMTApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29vcmRpbmF0ZXNcIik7XG4gICAgfVxuXG4gICAgY29uc3Qgc3F1YXJlID0gYm9hcmRbeV1beF07XG4gICAgaWYgKHNxdWFyZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcXVhcmUuaXNIaXQgPSB0cnVlO1xuICAgICAgc3F1YXJlLnNoaXAuaGl0KCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiovXG4gIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2soeCwgeSkge1xuICAgIGlmICh4IDwgMCB8fCB4ID49IDEwIHx8IHkgPCAwIHx8IHkgPj0gMTApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29vcmRpbmF0ZXNcIik7XG4gICAgfVxuXG4gICAgY29uc3Qgc3F1YXJlID0gYm9hcmRbeV1beF07XG4gICAgaWYgKHNxdWFyZSA9PT0gbnVsbCkge1xuICAgICAgLy8gTWFyayBzcXVhcmUgYXMgaGl0IGV2ZW4gaWYgdGhlcmUgaXMgbm8gc2hpcFxuICAgICAgYm9hcmRbeV1beF0gPSB7IGlzSGl0OiB0cnVlIH07XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3F1YXJlLmlzSGl0ID0gdHJ1ZTtcbiAgICAgIHNxdWFyZS5zaGlwLmhpdCgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYXJlQWxsU2hpcHNTdW5rKCkge1xuICAgIHJldHVybiBzaGlwcy5ldmVyeSgoc2hpcCkgPT4gc2hpcC5pc1N1bmspO1xuICB9XG5cbiAgcmV0dXJuIHsgYm9hcmQsIHBsYWNlU2hpcCwgcmVjZWl2ZUF0dGFjaywgYXJlQWxsU2hpcHNTdW5rIH07XG59XG5cbmV4cG9ydCB7IHJldmVyc2VTdHJpbmcsIHNoaXAsIGdhbWVib2FyZCB9O1xuXG4vL01BSU4gR0FNRSBMT09QXG5cbmNvbnN0IHBsYXllckJvYXJkID0gZ2FtZWJvYXJkKCk7XG5jb25zdCBjb21wdXRlckJvYXJkID0gZ2FtZWJvYXJkKCk7XG5cbnBsYXllckJvYXJkLnBsYWNlU2hpcChzaGlwKDUpLCAwLCAwLCB0cnVlKTtcbnBsYXllckJvYXJkLnBsYWNlU2hpcChzaGlwKDQpLCAxLCAwLCB0cnVlKTtcbnBsYXllckJvYXJkLnBsYWNlU2hpcChzaGlwKDMpLCAyLCAwLCB0cnVlKTtcbnBsYXllckJvYXJkLnBsYWNlU2hpcChzaGlwKDMpLCAzLCAwLCB0cnVlKTtcbnBsYXllckJvYXJkLnBsYWNlU2hpcChzaGlwKDIpLCA0LCAwLCB0cnVlKTtcblxuY29tcHV0ZXJCb2FyZC5wbGFjZVNoaXAoc2hpcCg1KSwgNSwgMCwgdHJ1ZSk7XG5jb21wdXRlckJvYXJkLnBsYWNlU2hpcChzaGlwKDQpLCA2LCAwLCB0cnVlKTtcbmNvbXB1dGVyQm9hcmQucGxhY2VTaGlwKHNoaXAoMyksIDcsIDAsIHRydWUpO1xuY29tcHV0ZXJCb2FyZC5wbGFjZVNoaXAoc2hpcCgzKSwgOCwgMCwgdHJ1ZSk7XG5jb21wdXRlckJvYXJkLnBsYWNlU2hpcChzaGlwKDIpLCA5LCAwLCB0cnVlKTtcblxuY29uc3QgcGxheWVyID0ge1xuICBhdHRhY2soZ2FtZWJvYXJkLCB4LCB5KSB7XG4gICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soeCwgeSk7XG4gIH0sXG59O1xuXG5jb25zdCBjb21wdXRlciA9IHtcbiAgYXR0YWNrKGdhbWVib2FyZCkge1xuICAgIGxldCBhdHRhY2tDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICB3aGlsZSAoIWF0dGFja0NvbXBsZXRlZCkge1xuICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICBpZiAoXG4gICAgICAgIGdhbWVib2FyZC5ib2FyZFt5XSAmJlxuICAgICAgICBnYW1lYm9hcmQuYm9hcmRbeV1beF0gJiZcbiAgICAgICAgIWdhbWVib2FyZC5ib2FyZFt5XVt4XS5pc0hpdFxuICAgICAgKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGdhbWVib2FyZC5ib2FyZFt5XVt4XSk7XG4gICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKHgsIHkpO1xuICAgICAgICBhdHRhY2tDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbn07XG5cbmxldCBjdXJyZW50UGxheWVyID0gcGxheWVyO1xuXG5mdW5jdGlvbiBzd2l0Y2hUdXJucygpIHtcbiAgaWYgKGN1cnJlbnRQbGF5ZXIgPT09IHBsYXllcikge1xuICAgIGN1cnJlbnRQbGF5ZXIgPSBjb21wdXRlcjtcbiAgfSBlbHNlIHtcbiAgICBjdXJyZW50UGxheWVyID0gcGxheWVyO1xuICB9XG59XG5cbmNvbnN0IHBsYXllckJvYXJkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyLWJvYXJkXCIpO1xuY29uc3QgY29tcHV0ZXJCb2FyZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbXB1dGVyLWJvYXJkXCIpO1xuXG5mdW5jdGlvbiByZW5kZXJCb2FyZChib2FyZCwgZWxlbWVudCkge1xuICAvLyBDbGVhciB0aGUgYm9hcmQgYmVmb3JlIHJlbmRlcmluZ1xuICBlbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2FyZC5ib2FyZC5sZW5ndGg7IGkrKykge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgYm9hcmQuYm9hcmRbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgIGNvbnN0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNxdWFyZVwiKTtcbiAgICAgIGlmIChib2FyZC5ib2FyZFtpXVtqXSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAoYm9hcmQuYm9hcmRbaV1bal0uaXNIaXQpIHtcbiAgICAgICAgICBpZiAoYm9hcmQuYm9hcmRbaV1bal0uc2hpcCkge1xuICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgICAgICAgICBzcXVhcmUudGV4dENvbnRlbnQgPSBcImhpdFwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcIm1pc3NcIik7XG4gICAgICAgICAgICBzcXVhcmUudGV4dENvbnRlbnQgPSBcIm1pc3NcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzaGlwXCIpO1xuICAgICAgICAgIHNxdWFyZS50ZXh0Q29udGVudCA9IFwic2hpcFwiO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNxdWFyZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBpZiAoY3VycmVudFBsYXllciA9PT0gcGxheWVyKSB7XG4gICAgICAgICAgY3VycmVudFBsYXllci5hdHRhY2soY29tcHV0ZXJCb2FyZCwgaiwgaSk7XG4gICAgICAgICAgcmVuZGVyQm9hcmQoY29tcHV0ZXJCb2FyZCwgY29tcHV0ZXJCb2FyZEVsZW1lbnQpO1xuICAgICAgICAgIHN3aXRjaFR1cm5zKCk7XG4gICAgICAgICAgcGxheUdhbWUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHNxdWFyZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHBsYXlHYW1lKCkge1xuICBpZiAocGxheWVyQm9hcmQuYXJlQWxsU2hpcHNTdW5rKCkpIHtcbiAgICBhbGVydChcIkNvbXB1dGVyIHdpbnMhXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChjb21wdXRlckJvYXJkLmFyZUFsbFNoaXBzU3VuaygpKSB7XG4gICAgYWxlcnQoXCJQbGF5ZXIgd2lucyFcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGN1cnJlbnRQbGF5ZXIgPT09IGNvbXB1dGVyKSB7XG4gICAgY29uc29sZS5sb2cocGxheWVyQm9hcmQuYm9hcmQpO1xuICAgIGN1cnJlbnRQbGF5ZXIuYXR0YWNrKHBsYXllckJvYXJkKTtcbiAgICByZW5kZXJCb2FyZChwbGF5ZXJCb2FyZCwgcGxheWVyQm9hcmRFbGVtZW50KTtcbiAgICBzd2l0Y2hUdXJucygpO1xuICAgIHBsYXlHYW1lKCk7XG4gIH1cbn1cblxucmVuZGVyQm9hcmQocGxheWVyQm9hcmQsIHBsYXllckJvYXJkRWxlbWVudCk7XG5yZW5kZXJCb2FyZChjb21wdXRlckJvYXJkLCBjb21wdXRlckJvYXJkRWxlbWVudCk7XG5wbGF5R2FtZSgpO1xuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwic2hpcCIsImxlbmd0aCIsIl9oaXRzIiwiaXNTdW5rIiwiaGl0cyIsImhpdCIsImdhbWVib2FyZCIsImJvYXJkIiwiQXJyYXkiLCJmcm9tIiwiZmlsbCIsInNoaXBzIiwicGxhY2VTaGlwIiwieCIsInkiLCJpc1ZlcnRpY2FsIiwiRXJyb3IiLCJpIiwiaXNIaXQiLCJwdXNoIiwicmVjZWl2ZUF0dGFjayIsInNxdWFyZSIsImFyZUFsbFNoaXBzU3VuayIsImV2ZXJ5IiwiZCIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJjb25zb2xlIiwibG9nIiwic3BsaXQiLCJyZXZlcnNlIiwiam9pbiIsInBsYXllckJvYXJkIiwiY29tcHV0ZXJCb2FyZCIsInBsYXllciIsImF0dGFjayIsImNvbXB1dGVyIiwiYXR0YWNrQ29tcGxldGVkIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY3VycmVudFBsYXllciIsInN3aXRjaFR1cm5zIiwicGxheWVyQm9hcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbXB1dGVyQm9hcmRFbGVtZW50IiwicmVuZGVyQm9hcmQiLCJlbGVtZW50IiwiaW5uZXJIVE1MIiwiaiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwbGF5R2FtZSIsImFwcGVuZENoaWxkIiwiYWxlcnQiXSwic291cmNlUm9vdCI6IiJ9