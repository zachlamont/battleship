(()=>{"use strict";var t={};function e(t){let e=0,i=!1;return{length:t,get hits(){return e},get isSunk(){return i},hit:function(){e++,e===t&&(i=!0)}}}function i(){const t=Array.from(Array(10),(()=>Array(10).fill().map((()=>({isHit:!1,ship:null}))))),e=[];return{board:t,placeShip:function(i,o,r,n){if(o<0||o>=10||r<0||r>=10)throw new Error("Invalid coordinates");if(n){if(r+i.length>10)throw new Error("Ship placement out of bounds");for(let e=0;e<i.length;e++)if(null!==t[r+e][o].ship)throw new Error("Ship placement overlap");for(let e=0;e<i.length;e++)t[r+e][o]={ship:i,isHit:!1}}else{if(o+i.length>10)throw new Error("Ship placement out of bounds");for(let e=0;e<i.length;e++)if(null!==t[r][o+e].ship)throw new Error("Ship placement overlap");for(let e=0;e<i.length;e++)t[r][o+e]={ship:i,isHit:!1}}e.push(i)},receiveAttack:function(e,i){if(e<0||e>=10||i<0||i>=10)throw new Error("Invalid coordinates");const o=t[i][e];return null!==o.ship&&0==o.isHit?(o.isHit=!0,o.ship.hit(),!0):!(!o||0!=o.isHit||(o.isHit=!0,0))},areAllShipsSunk:function(){return e.every((t=>t.isSunk))}}}t.d=(e,i)=>{for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),console.log("mazda".split("").reverse().join(""));const o=i(),r=i();o.placeShip(e(5),0,0,!0),o.placeShip(e(4),1,0,!0),o.placeShip(e(3),2,0,!0),o.placeShip(e(3),3,0,!0),o.placeShip(e(2),4,0,!0),r.placeShip(e(5),5,0,!0),r.placeShip(e(4),6,0,!0),r.placeShip(e(3),7,0,!0),r.placeShip(e(3),8,0,!0),r.placeShip(e(2),9,0,!0);const n={attack(t,e,i){t.receiveAttack(e,i)}},l={attack(t){let e=!1;for(;!e;){const i=Math.floor(10*Math.random()),o=Math.floor(10*Math.random()),r=t.board[o][i];console.log(r),r&&!r.isHit&&(t.receiveAttack(i,o),e=!0)}}};let a=n;function s(){a=a===n?l:n}const c=document.getElementById("player-board"),p=document.getElementById("computer-board");function h(t,e){e.innerHTML="";for(let i=0;i<t.board.length;i++)for(let o=0;o<t.board[i].length;o++){const l=document.createElement("div");l.classList.add("square"),null===t.board[i][o].ship&&!0===t.board[i][o].isHit&&(console.log("yo"+t.board[i][o].ship),console.log("is hit"+t.board[i][o].isHit),l.classList.add("miss"),l.textContent="miss"),null!==t.board[i][o].ship&&(!0===t.board[i][o].isHit?(l.classList.add("hit"),l.textContent="hit"):(l.classList.add("ship"),l.textContent="ship")),l.addEventListener("click",(()=>{a===n&&(a.attack(r,o,i),h(r,p),s(),d())})),e.appendChild(l)}}function d(){o.areAllShipsSunk()?alert("Computer wins!"):r.areAllShipsSunk()?alert("Player wins!"):a===l&&(console.log(o.board),a.attack(o),h(o,c),s(),d())}h(o,c),h(r,p),d()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJmdW5jdGlvbiByZXZlcnNlU3RyaW5nKHN0cikge1xuICByZXR1cm4gc3RyLnNwbGl0KFwiXCIpLnJldmVyc2UoKS5qb2luKFwiXCIpO1xufVxuXG5jb25zb2xlLmxvZyhyZXZlcnNlU3RyaW5nKFwibWF6ZGFcIikpO1xuXG4vL1NISVAgRkFDVE9SWVxuXG5mdW5jdGlvbiBzaGlwKGxlbmd0aCkge1xuICBsZXQgX2hpdHMgPSAwO1xuICBsZXQgaXNTdW5rID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gaGl0KCkge1xuICAgIF9oaXRzKys7XG4gICAgaWYgKF9oaXRzID09PSBsZW5ndGgpIHtcbiAgICAgIGlzU3VuayA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBsZW5ndGgsXG4gICAgZ2V0IGhpdHMoKSB7XG4gICAgICByZXR1cm4gX2hpdHM7XG4gICAgfSxcbiAgICBnZXQgaXNTdW5rKCkge1xuICAgICAgcmV0dXJuIGlzU3VuaztcbiAgICB9LFxuICAgIGhpdCxcbiAgfTtcbn1cblxuLy9HQU1FQk9BUkQgRkFDVE9SWVxuXG5mdW5jdGlvbiBnYW1lYm9hcmQoKSB7XG4gIGNvbnN0IGJvYXJkID0gQXJyYXkuZnJvbShBcnJheSgxMCksICgpID0+XG4gICAgQXJyYXkoMTApXG4gICAgICAuZmlsbCgpXG4gICAgICAubWFwKCgpID0+ICh7XG4gICAgICAgIGlzSGl0OiBmYWxzZSxcbiAgICAgICAgc2hpcDogbnVsbCxcbiAgICAgIH0pKVxuICApO1xuXG4gIGNvbnN0IHNoaXBzID0gW107XG5cbiAgZnVuY3Rpb24gcGxhY2VTaGlwKHNoaXAsIHgsIHksIGlzVmVydGljYWwpIHtcbiAgICBpZiAoeCA8IDAgfHwgeCA+PSAxMCB8fCB5IDwgMCB8fCB5ID49IDEwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvb3JkaW5hdGVzXCIpO1xuICAgIH1cblxuICAgIGlmIChpc1ZlcnRpY2FsKSB7XG4gICAgICBpZiAoeSArIHNoaXAubGVuZ3RoID4gMTApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2hpcCBwbGFjZW1lbnQgb3V0IG9mIGJvdW5kc1wiKTtcbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChib2FyZFt5ICsgaV1beF0uc2hpcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNoaXAgcGxhY2VtZW50IG92ZXJsYXBcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJvYXJkW3kgKyBpXVt4XSA9IHsgc2hpcDogc2hpcCwgaXNIaXQ6IGZhbHNlIH07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh4ICsgc2hpcC5sZW5ndGggPiAxMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaGlwIHBsYWNlbWVudCBvdXQgb2YgYm91bmRzXCIpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGJvYXJkW3ldW3ggKyBpXS5zaGlwICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2hpcCBwbGFjZW1lbnQgb3ZlcmxhcFwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYm9hcmRbeV1beCArIGldID0geyBzaGlwOiBzaGlwLCBpc0hpdDogZmFsc2UgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGlwcy5wdXNoKHNoaXApO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVjZWl2ZUF0dGFjayh4LCB5KSB7XG4gICAgaWYgKHggPCAwIHx8IHggPj0gMTAgfHwgeSA8IDAgfHwgeSA+PSAxMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb29yZGluYXRlc1wiKTtcbiAgICB9XG5cbiAgICBjb25zdCBzcXVhcmUgPSBib2FyZFt5XVt4XTtcbiAgICBpZiAoc3F1YXJlLnNoaXAgIT09IG51bGwgJiYgc3F1YXJlLmlzSGl0ID09IGZhbHNlKSB7XG4gICAgICBzcXVhcmUuaXNIaXQgPSB0cnVlO1xuICAgICAgc3F1YXJlLnNoaXAuaGl0KCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHNxdWFyZSAmJiBzcXVhcmUuaXNIaXQgPT0gZmFsc2UpIHtcbiAgICAgIHNxdWFyZS5pc0hpdCA9IHRydWU7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFyZUFsbFNoaXBzU3VuaygpIHtcbiAgICByZXR1cm4gc2hpcHMuZXZlcnkoKHNoaXApID0+IHNoaXAuaXNTdW5rKTtcbiAgfVxuXG4gIHJldHVybiB7IGJvYXJkLCBwbGFjZVNoaXAsIHJlY2VpdmVBdHRhY2ssIGFyZUFsbFNoaXBzU3VuayB9O1xufVxuXG5leHBvcnQgeyByZXZlcnNlU3RyaW5nLCBzaGlwLCBnYW1lYm9hcmQgfTtcblxuLy9NQUlOIEdBTUUgTE9PUFxuXG5jb25zdCBwbGF5ZXJCb2FyZCA9IGdhbWVib2FyZCgpO1xuY29uc3QgY29tcHV0ZXJCb2FyZCA9IGdhbWVib2FyZCgpO1xuXG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoc2hpcCg1KSwgMCwgMCwgdHJ1ZSk7XG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoc2hpcCg0KSwgMSwgMCwgdHJ1ZSk7XG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoc2hpcCgzKSwgMiwgMCwgdHJ1ZSk7XG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoc2hpcCgzKSwgMywgMCwgdHJ1ZSk7XG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoc2hpcCgyKSwgNCwgMCwgdHJ1ZSk7XG5cbmNvbXB1dGVyQm9hcmQucGxhY2VTaGlwKHNoaXAoNSksIDUsIDAsIHRydWUpO1xuY29tcHV0ZXJCb2FyZC5wbGFjZVNoaXAoc2hpcCg0KSwgNiwgMCwgdHJ1ZSk7XG5jb21wdXRlckJvYXJkLnBsYWNlU2hpcChzaGlwKDMpLCA3LCAwLCB0cnVlKTtcbmNvbXB1dGVyQm9hcmQucGxhY2VTaGlwKHNoaXAoMyksIDgsIDAsIHRydWUpO1xuY29tcHV0ZXJCb2FyZC5wbGFjZVNoaXAoc2hpcCgyKSwgOSwgMCwgdHJ1ZSk7XG5cbmNvbnN0IHBsYXllciA9IHtcbiAgYXR0YWNrKGdhbWVib2FyZCwgeCwgeSkge1xuICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKHgsIHkpO1xuICB9LFxufTtcblxuY29uc3QgY29tcHV0ZXIgPSB7XG4gIGF0dGFjayhnYW1lYm9hcmQpIHtcbiAgICBsZXQgYXR0YWNrQ29tcGxldGVkID0gZmFsc2U7XG4gICAgd2hpbGUgKCFhdHRhY2tDb21wbGV0ZWQpIHtcbiAgICAgIGNvbnN0IHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgY29uc3Qgc3F1YXJlID0gZ2FtZWJvYXJkLmJvYXJkW3ldW3hdO1xuICAgICAgY29uc29sZS5sb2coc3F1YXJlKTtcbiAgICAgIGlmIChzcXVhcmUgJiYgIXNxdWFyZS5pc0hpdCkge1xuICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayh4LCB5KTtcbiAgICAgICAgYXR0YWNrQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG59O1xuXG5sZXQgY3VycmVudFBsYXllciA9IHBsYXllcjtcblxuZnVuY3Rpb24gc3dpdGNoVHVybnMoKSB7XG4gIGlmIChjdXJyZW50UGxheWVyID09PSBwbGF5ZXIpIHtcbiAgICBjdXJyZW50UGxheWVyID0gY29tcHV0ZXI7XG4gIH0gZWxzZSB7XG4gICAgY3VycmVudFBsYXllciA9IHBsYXllcjtcbiAgfVxufVxuXG5jb25zdCBwbGF5ZXJCb2FyZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllci1ib2FyZFwiKTtcbmNvbnN0IGNvbXB1dGVyQm9hcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21wdXRlci1ib2FyZFwiKTtcblxuZnVuY3Rpb24gcmVuZGVyQm9hcmQoYm9hcmQsIGVsZW1lbnQpIHtcbiAgLy8gQ2xlYXIgdGhlIGJvYXJkIGJlZm9yZSByZW5kZXJpbmdcbiAgZWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYm9hcmQuYm9hcmQubGVuZ3RoOyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvYXJkLmJvYXJkW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzcXVhcmVcIik7XG5cbiAgICAgIGlmIChib2FyZC5ib2FyZFtpXVtqXS5zaGlwID09PSBudWxsICYmIGJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwieW9cIiArIGJvYXJkLmJvYXJkW2ldW2pdLnNoaXApO1xuICAgICAgICBjb25zb2xlLmxvZyhcImlzIGhpdFwiICsgYm9hcmQuYm9hcmRbaV1bal0uaXNIaXQpO1xuICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcIm1pc3NcIik7XG4gICAgICAgIHNxdWFyZS50ZXh0Q29udGVudCA9IFwibWlzc1wiO1xuICAgICAgfVxuICAgICAgaWYgKGJvYXJkLmJvYXJkW2ldW2pdLnNoaXAgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKGJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09PSB0cnVlKSB7XG4gICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgICAgICAgc3F1YXJlLnRleHRDb250ZW50ID0gXCJoaXRcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNoaXBcIik7XG4gICAgICAgICAgc3F1YXJlLnRleHRDb250ZW50ID0gXCJzaGlwXCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3F1YXJlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGlmIChjdXJyZW50UGxheWVyID09PSBwbGF5ZXIpIHtcbiAgICAgICAgICBjdXJyZW50UGxheWVyLmF0dGFjayhjb21wdXRlckJvYXJkLCBqLCBpKTtcbiAgICAgICAgICByZW5kZXJCb2FyZChjb21wdXRlckJvYXJkLCBjb21wdXRlckJvYXJkRWxlbWVudCk7XG4gICAgICAgICAgc3dpdGNoVHVybnMoKTtcbiAgICAgICAgICBwbGF5R2FtZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcGxheUdhbWUoKSB7XG4gIGlmIChwbGF5ZXJCb2FyZC5hcmVBbGxTaGlwc1N1bmsoKSkge1xuICAgIGFsZXJ0KFwiQ29tcHV0ZXIgd2lucyFcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNvbXB1dGVyQm9hcmQuYXJlQWxsU2hpcHNTdW5rKCkpIHtcbiAgICBhbGVydChcIlBsYXllciB3aW5zIVwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY3VycmVudFBsYXllciA9PT0gY29tcHV0ZXIpIHtcbiAgICBjb25zb2xlLmxvZyhwbGF5ZXJCb2FyZC5ib2FyZCk7XG4gICAgY3VycmVudFBsYXllci5hdHRhY2socGxheWVyQm9hcmQpO1xuICAgIHJlbmRlckJvYXJkKHBsYXllckJvYXJkLCBwbGF5ZXJCb2FyZEVsZW1lbnQpO1xuICAgIHN3aXRjaFR1cm5zKCk7XG4gICAgcGxheUdhbWUoKTtcbiAgfVxufVxuXG5yZW5kZXJCb2FyZChwbGF5ZXJCb2FyZCwgcGxheWVyQm9hcmRFbGVtZW50KTtcbnJlbmRlckJvYXJkKGNvbXB1dGVyQm9hcmQsIGNvbXB1dGVyQm9hcmRFbGVtZW50KTtcbnBsYXlHYW1lKCk7XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJzaGlwIiwibGVuZ3RoIiwiX2hpdHMiLCJpc1N1bmsiLCJoaXRzIiwiaGl0IiwiZ2FtZWJvYXJkIiwiYm9hcmQiLCJBcnJheSIsImZyb20iLCJmaWxsIiwibWFwIiwiaXNIaXQiLCJzaGlwcyIsInBsYWNlU2hpcCIsIngiLCJ5IiwiaXNWZXJ0aWNhbCIsIkVycm9yIiwiaSIsInB1c2giLCJyZWNlaXZlQXR0YWNrIiwic3F1YXJlIiwiYXJlQWxsU2hpcHNTdW5rIiwiZXZlcnkiLCJkIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNvbnNvbGUiLCJsb2ciLCJzcGxpdCIsInJldmVyc2UiLCJqb2luIiwicGxheWVyQm9hcmQiLCJjb21wdXRlckJvYXJkIiwicGxheWVyIiwiYXR0YWNrIiwiY29tcHV0ZXIiLCJhdHRhY2tDb21wbGV0ZWQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjdXJyZW50UGxheWVyIiwic3dpdGNoVHVybnMiLCJwbGF5ZXJCb2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29tcHV0ZXJCb2FyZEVsZW1lbnQiLCJyZW5kZXJCb2FyZCIsImVsZW1lbnQiLCJpbm5lckhUTUwiLCJqIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInBsYXlHYW1lIiwiYXBwZW5kQ2hpbGQiLCJhbGVydCJdLCJzb3VyY2VSb290IjoiIn0=