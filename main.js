(()=>{"use strict";var t={};function e(t){let e=0,i=!1;return{length:t,get hits(){return e},get isSunk(){return i},hit:function(){e++,e===t&&(i=!0)}}}function i(){const t=Array.from(Array(10),(()=>Array(10).fill().map((()=>({isHit:!1,ship:null}))))),e=[];return{board:t,placeShip:function(i,o,r,n){if(o<0||o>=10||r<0||r>=10)throw new Error("Invalid coordinates");if(n){if(r+i.length>10)throw new Error("Ship placement out of bounds");for(let e=0;e<i.length;e++)if(null!==t[r+e][o].ship)throw new Error("Ship placement overlap");for(let e=0;e<i.length;e++)t[r+e][o]={ship:i,isHit:!1}}else{if(o+i.length>10)throw new Error("Ship placement out of bounds");for(let e=0;e<i.length;e++)if(null!==t[r][o+e].ship)throw new Error("Ship placement overlap");for(let e=0;e<i.length;e++)t[r][o+e]={ship:i,isHit:!1}}e.push(i)},receiveAttack:function(e,i){if(e<0||e>=10||i<0||i>=10)throw new Error("Invalid coordinates");const o=t[i][e];return null!==o.ship&&0==o.isHit?(o.isHit=!0,o.ship.hit(),!0):!(!o||0!=o.isHit||(o.isHit=!0,0))},areAllShipsSunk:function(){return e.every((t=>t.isSunk))}}}t.d=(e,i)=>{for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),console.log("mazda".split("").reverse().join(""));const o=i(),r=i();o.placeShip(e(5),0,0,!0),o.placeShip(e(4),1,0,!0),o.placeShip(e(3),2,0,!0),o.placeShip(e(3),3,0,!0),o.placeShip(e(2),4,0,!0),r.placeShip(e(5),5,0,!0),r.placeShip(e(4),6,0,!0),r.placeShip(e(3),7,0,!0),r.placeShip(e(3),8,0,!0),r.placeShip(e(2),9,0,!0);const n={attack(t,e,i){t.receiveAttack(e,i)}},l={attack(t){let e=!1;for(;!e;){const i=Math.floor(10*Math.random()),o=Math.floor(10*Math.random()),r=t.board[o][i];console.log(r),r&&!r.isHit&&(t.receiveAttack(i,o),e=!0)}}};let a=n;function s(){a=a===n?l:n}const c=document.getElementById("player-board"),p=document.getElementById("computer-board");function h(t,e){e.innerHTML="";for(let i=0;i<t.board.length;i++)for(let o=0;o<t.board[i].length;o++){const l=document.createElement("div");l.classList.add("square"),null===t.board[i][o].ship&&!0===t.board[i][o].isHit&&(console.log("yo"+t.board[i][o].ship),console.log("is hit"+t.board[i][o].isHit),l.classList.add("miss"),l.textContent="miss"),null!==t.board[i][o].ship&&(!0===t.board[i][o].isHit?(l.classList.add("hit"),l.textContent="hit"):(l.classList.add("ship"),l.textContent="ship")),l.addEventListener("click",(()=>{a===n&&(a.attack(r,o,i),h(r,p),s(),d())})),e.appendChild(l)}}function d(){o.areAllShipsSunk()?alert("Computer wins!"):r.areAllShipsSunk()?alert("Player wins!"):a===l&&(console.log(o.board),a.attack(o),h(o,c),s(),d())}h(o,c),h(r,p),d()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJmdW5jdGlvbiByZXZlcnNlU3RyaW5nKHN0cikge1xuICByZXR1cm4gc3RyLnNwbGl0KFwiXCIpLnJldmVyc2UoKS5qb2luKFwiXCIpO1xufVxuXG5jb25zb2xlLmxvZyhyZXZlcnNlU3RyaW5nKFwibWF6ZGFcIikpO1xuXG4vL1NISVAgRkFDVE9SWVxuXG5mdW5jdGlvbiBzaGlwKGxlbmd0aCkge1xuICBsZXQgX2hpdHMgPSAwO1xuICBsZXQgaXNTdW5rID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gaGl0KCkge1xuICAgIF9oaXRzKys7XG4gICAgaWYgKF9oaXRzID09PSBsZW5ndGgpIHtcbiAgICAgIGlzU3VuayA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBsZW5ndGgsXG4gICAgZ2V0IGhpdHMoKSB7XG4gICAgICByZXR1cm4gX2hpdHM7XG4gICAgfSxcbiAgICBnZXQgaXNTdW5rKCkge1xuICAgICAgcmV0dXJuIGlzU3VuaztcbiAgICB9LFxuICAgIGhpdCxcbiAgfTtcbn1cblxuLy9HQU1FQk9BUkQgRkFDVE9SWVxuXG5mdW5jdGlvbiBnYW1lYm9hcmQoKSB7XG4vKlxuICBjb25zdCBib2FyZCA9IEFycmF5LmZyb20oQXJyYXkoMTApLCAoKSA9PlxuICAgIEFycmF5KDEwKS5maWxsKHtcbiAgICAgIGlzSGl0OiBmYWxzZSxcbiAgICAgIHNoaXA6IG51bGwsXG4gICAgfSlcbiAgKTtcbiAgKi9cblxuICBjb25zdCBib2FyZCA9IEFycmF5LmZyb20oQXJyYXkoMTApLCAoKSA9PlxuICAgIEFycmF5KDEwKS5maWxsKCkubWFwKCgpID0+ICh7XG4gICAgICAgIGlzSGl0OiBmYWxzZSxcbiAgICAgICAgc2hpcDogbnVsbCxcbiAgICB9KSlcbik7XG5cblxuICBjb25zdCBzaGlwcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIHBsYWNlU2hpcChzaGlwLCB4LCB5LCBpc1ZlcnRpY2FsKSB7XG4gICAgaWYgKHggPCAwIHx8IHggPj0gMTAgfHwgeSA8IDAgfHwgeSA+PSAxMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb29yZGluYXRlc1wiKTtcbiAgICB9XG5cbiAgICBpZiAoaXNWZXJ0aWNhbCkge1xuICAgICAgaWYgKHkgKyBzaGlwLmxlbmd0aCA+IDEwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNoaXAgcGxhY2VtZW50IG91dCBvZiBib3VuZHNcIik7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYm9hcmRbeSArIGldW3hdLnNoaXAgIT09IG51bGwpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaGlwIHBsYWNlbWVudCBvdmVybGFwXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBib2FyZFt5ICsgaV1beF0gPSB7IHNoaXA6IHNoaXAsIGlzSGl0OiBmYWxzZSB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoeCArIHNoaXAubGVuZ3RoID4gMTApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2hpcCBwbGFjZW1lbnQgb3V0IG9mIGJvdW5kc1wiKTtcbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChib2FyZFt5XVt4ICsgaV0uc2hpcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNoaXAgcGxhY2VtZW50IG92ZXJsYXBcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJvYXJkW3ldW3ggKyBpXSA9IHsgc2hpcDogc2hpcCwgaXNIaXQ6IGZhbHNlIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hpcHMucHVzaChzaGlwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2soeCwgeSkge1xuICAgIGlmICh4IDwgMCB8fCB4ID49IDEwIHx8IHkgPCAwIHx8IHkgPj0gMTApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29vcmRpbmF0ZXNcIik7XG4gICAgfVxuXG4gICAgY29uc3Qgc3F1YXJlID0gYm9hcmRbeV1beF07XG4gICAgaWYgKHNxdWFyZS5zaGlwICE9PSBudWxsICYmIHNxdWFyZS5pc0hpdCA9PSBmYWxzZSkge1xuICAgICAgc3F1YXJlLmlzSGl0ID0gdHJ1ZTtcbiAgICAgIHNxdWFyZS5zaGlwLmhpdCgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChzcXVhcmUgJiYgc3F1YXJlLmlzSGl0ID09IGZhbHNlKSB7XG4gICAgICBzcXVhcmUuaXNIaXQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBhcmVBbGxTaGlwc1N1bmsoKSB7XG4gICAgcmV0dXJuIHNoaXBzLmV2ZXJ5KChzaGlwKSA9PiBzaGlwLmlzU3Vuayk7XG4gIH1cblxuICByZXR1cm4geyBib2FyZCwgcGxhY2VTaGlwLCByZWNlaXZlQXR0YWNrLCBhcmVBbGxTaGlwc1N1bmsgfTtcbn1cblxuZXhwb3J0IHsgcmV2ZXJzZVN0cmluZywgc2hpcCwgZ2FtZWJvYXJkIH07XG5cbi8vTUFJTiBHQU1FIExPT1BcblxuY29uc3QgcGxheWVyQm9hcmQgPSBnYW1lYm9hcmQoKTtcbmNvbnN0IGNvbXB1dGVyQm9hcmQgPSBnYW1lYm9hcmQoKTtcblxucGxheWVyQm9hcmQucGxhY2VTaGlwKHNoaXAoNSksIDAsIDAsIHRydWUpO1xucGxheWVyQm9hcmQucGxhY2VTaGlwKHNoaXAoNCksIDEsIDAsIHRydWUpO1xucGxheWVyQm9hcmQucGxhY2VTaGlwKHNoaXAoMyksIDIsIDAsIHRydWUpO1xucGxheWVyQm9hcmQucGxhY2VTaGlwKHNoaXAoMyksIDMsIDAsIHRydWUpO1xucGxheWVyQm9hcmQucGxhY2VTaGlwKHNoaXAoMiksIDQsIDAsIHRydWUpO1xuXG5jb21wdXRlckJvYXJkLnBsYWNlU2hpcChzaGlwKDUpLCA1LCAwLCB0cnVlKTtcbmNvbXB1dGVyQm9hcmQucGxhY2VTaGlwKHNoaXAoNCksIDYsIDAsIHRydWUpO1xuY29tcHV0ZXJCb2FyZC5wbGFjZVNoaXAoc2hpcCgzKSwgNywgMCwgdHJ1ZSk7XG5jb21wdXRlckJvYXJkLnBsYWNlU2hpcChzaGlwKDMpLCA4LCAwLCB0cnVlKTtcbmNvbXB1dGVyQm9hcmQucGxhY2VTaGlwKHNoaXAoMiksIDksIDAsIHRydWUpO1xuXG5jb25zdCBwbGF5ZXIgPSB7XG4gIGF0dGFjayhnYW1lYm9hcmQsIHgsIHkpIHtcbiAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayh4LCB5KTtcbiAgfSxcbn07XG4vKlxuY29uc3QgY29tcHV0ZXIgPSB7XG4gIGF0dGFjayhnYW1lYm9hcmQpIHtcbiAgICBsZXQgYXR0YWNrQ29tcGxldGVkID0gZmFsc2U7XG4gICAgd2hpbGUgKCFhdHRhY2tDb21wbGV0ZWQpIHtcbiAgICAgIGNvbnN0IHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgaWYgKFxuICAgICAgICBnYW1lYm9hcmQuYm9hcmRbeV0gJiZcbiAgICAgICAgZ2FtZWJvYXJkLmJvYXJkW3ldW3hdICYmXG4gICAgICAgICFnYW1lYm9hcmQuYm9hcmRbeV1beF0uaXNIaXRcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlLmxvZyhnYW1lYm9hcmQuYm9hcmRbeV1beF0pO1xuICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayh4LCB5KTtcbiAgICAgICAgYXR0YWNrQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG59O1xuKi9cblxuY29uc3QgY29tcHV0ZXIgPSB7XG4gIGF0dGFjayhnYW1lYm9hcmQpIHtcbiAgICBsZXQgYXR0YWNrQ29tcGxldGVkID0gZmFsc2U7XG4gICAgd2hpbGUgKCFhdHRhY2tDb21wbGV0ZWQpIHtcbiAgICAgIGNvbnN0IHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgY29uc3Qgc3F1YXJlID0gZ2FtZWJvYXJkLmJvYXJkW3ldW3hdO1xuICAgICAgY29uc29sZS5sb2coc3F1YXJlKTtcbiAgICAgIGlmIChzcXVhcmUgJiYgIXNxdWFyZS5pc0hpdCkge1xuICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayh4LCB5KTtcbiAgICAgICAgYXR0YWNrQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG59O1xuXG5sZXQgY3VycmVudFBsYXllciA9IHBsYXllcjtcblxuZnVuY3Rpb24gc3dpdGNoVHVybnMoKSB7XG4gIGlmIChjdXJyZW50UGxheWVyID09PSBwbGF5ZXIpIHtcbiAgICBjdXJyZW50UGxheWVyID0gY29tcHV0ZXI7XG4gIH0gZWxzZSB7XG4gICAgY3VycmVudFBsYXllciA9IHBsYXllcjtcbiAgfVxufVxuXG5jb25zdCBwbGF5ZXJCb2FyZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllci1ib2FyZFwiKTtcbmNvbnN0IGNvbXB1dGVyQm9hcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21wdXRlci1ib2FyZFwiKTtcblxuZnVuY3Rpb24gcmVuZGVyQm9hcmQoYm9hcmQsIGVsZW1lbnQpIHtcbiAgLy8gQ2xlYXIgdGhlIGJvYXJkIGJlZm9yZSByZW5kZXJpbmdcbiAgZWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYm9hcmQuYm9hcmQubGVuZ3RoOyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvYXJkLmJvYXJkW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJzcXVhcmVcIik7XG5cbiAgICAgIGlmIChib2FyZC5ib2FyZFtpXVtqXS5zaGlwID09PSBudWxsICYmIGJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwieW9cIiArIGJvYXJkLmJvYXJkW2ldW2pdLnNoaXApO1xuICAgICAgICBjb25zb2xlLmxvZyhcImlzIGhpdFwiICsgYm9hcmQuYm9hcmRbaV1bal0uaXNIaXQpO1xuICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcIm1pc3NcIik7XG4gICAgICAgIHNxdWFyZS50ZXh0Q29udGVudCA9IFwibWlzc1wiO1xuICAgICAgfVxuICAgICAgaWYgKGJvYXJkLmJvYXJkW2ldW2pdLnNoaXAgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKGJvYXJkLmJvYXJkW2ldW2pdLmlzSGl0ID09PSB0cnVlKSB7XG4gICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgICAgICAgc3F1YXJlLnRleHRDb250ZW50ID0gXCJoaXRcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInNoaXBcIik7XG4gICAgICAgICAgc3F1YXJlLnRleHRDb250ZW50ID0gXCJzaGlwXCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLypcbiAgICAgIGlmIChib2FyZC5ib2FyZFtpXVtqXSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAoYm9hcmQuYm9hcmRbaV1bal0uaXNIaXQgPT09IHRydWUpIHtcbiAgICAgICAgICBpZiAoYm9hcmQuYm9hcmRbaV1bal0uc2hpcCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgICAgICAgICBzcXVhcmUudGV4dENvbnRlbnQgPSBcImhpdFwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcIm1pc3NcIik7XG4gICAgICAgICAgICBzcXVhcmUudGV4dENvbnRlbnQgPSBcIm1pc3NcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGJvYXJkLmJvYXJkW2ldW2pdLnNoaXAgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwic2hpcFwiKTtcbiAgICAgICAgICAgIHNxdWFyZS50ZXh0Q29udGVudCA9IFwic2hpcFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuKi9cblxuICAgICAgc3F1YXJlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGlmIChjdXJyZW50UGxheWVyID09PSBwbGF5ZXIpIHtcbiAgICAgICAgICBjdXJyZW50UGxheWVyLmF0dGFjayhjb21wdXRlckJvYXJkLCBqLCBpKTtcbiAgICAgICAgICByZW5kZXJCb2FyZChjb21wdXRlckJvYXJkLCBjb21wdXRlckJvYXJkRWxlbWVudCk7XG4gICAgICAgICAgc3dpdGNoVHVybnMoKTtcbiAgICAgICAgICBwbGF5R2FtZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcGxheUdhbWUoKSB7XG4gIGlmIChwbGF5ZXJCb2FyZC5hcmVBbGxTaGlwc1N1bmsoKSkge1xuICAgIGFsZXJ0KFwiQ29tcHV0ZXIgd2lucyFcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNvbXB1dGVyQm9hcmQuYXJlQWxsU2hpcHNTdW5rKCkpIHtcbiAgICBhbGVydChcIlBsYXllciB3aW5zIVwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY3VycmVudFBsYXllciA9PT0gY29tcHV0ZXIpIHtcbiAgICBjb25zb2xlLmxvZyhwbGF5ZXJCb2FyZC5ib2FyZCk7XG4gICAgY3VycmVudFBsYXllci5hdHRhY2socGxheWVyQm9hcmQpO1xuICAgIHJlbmRlckJvYXJkKHBsYXllckJvYXJkLCBwbGF5ZXJCb2FyZEVsZW1lbnQpO1xuICAgIHN3aXRjaFR1cm5zKCk7XG4gICAgcGxheUdhbWUoKTtcbiAgfVxufVxuXG5yZW5kZXJCb2FyZChwbGF5ZXJCb2FyZCwgcGxheWVyQm9hcmRFbGVtZW50KTtcbnJlbmRlckJvYXJkKGNvbXB1dGVyQm9hcmQsIGNvbXB1dGVyQm9hcmRFbGVtZW50KTtcbnBsYXlHYW1lKCk7XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJzaGlwIiwibGVuZ3RoIiwiX2hpdHMiLCJpc1N1bmsiLCJoaXRzIiwiaGl0IiwiZ2FtZWJvYXJkIiwiYm9hcmQiLCJBcnJheSIsImZyb20iLCJmaWxsIiwibWFwIiwiaXNIaXQiLCJzaGlwcyIsInBsYWNlU2hpcCIsIngiLCJ5IiwiaXNWZXJ0aWNhbCIsIkVycm9yIiwiaSIsInB1c2giLCJyZWNlaXZlQXR0YWNrIiwic3F1YXJlIiwiYXJlQWxsU2hpcHNTdW5rIiwiZXZlcnkiLCJkIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNvbnNvbGUiLCJsb2ciLCJzcGxpdCIsInJldmVyc2UiLCJqb2luIiwicGxheWVyQm9hcmQiLCJjb21wdXRlckJvYXJkIiwicGxheWVyIiwiYXR0YWNrIiwiY29tcHV0ZXIiLCJhdHRhY2tDb21wbGV0ZWQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjdXJyZW50UGxheWVyIiwic3dpdGNoVHVybnMiLCJwbGF5ZXJCb2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29tcHV0ZXJCb2FyZEVsZW1lbnQiLCJyZW5kZXJCb2FyZCIsImVsZW1lbnQiLCJpbm5lckhUTUwiLCJqIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInBsYXlHYW1lIiwiYXBwZW5kQ2hpbGQiLCJhbGVydCJdLCJzb3VyY2VSb290IjoiIn0=